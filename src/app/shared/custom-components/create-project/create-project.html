<form [formGroup]="createProject" (ngSubmit)="handleProject()" class="flex flex-col">
  <div class="flex flex-col pb-2 pt-1">
    <label for="">Title</label>
    <input
      z-input
      type="text"
      placeholder="Title of project"
      formControlName="projectTitle"
      zSize="lg"
      class="text-secondary-foreground text-sm"
    />
    @if (createProject.get('projectTitle')?.touched && createProject.get('projectTitle')?.invalid) {
      @if (createProject.get('projectTitle')?.errors?.['required']) {
        <span class="text-destructive"> project title is required</span>
      } @else if (
        createProject.get('projectTitle')?.errors?.['minlength'] ||
        createProject.get('projectTitle')?.errors?.['maxlength']
      ) {
        <span class="text-destructive">title can be of 2-50 characters</span>
      }
    }
  </div>

  <div class="flex flex-col pb-2 pt-1">
    <label for="">Description</label>
    <textarea
      z-input
      rows="5"
      placeholder="Description of project"
      formControlName="description"
      class="w-full text-secondary-foreground"
    ></textarea>

    @if (createProject.get('description')?.errors?.['maxlength']) {
      <span class="text-destructive">description can be of 255 characters</span>
    }
  </div>

  <div class="flex flex-col md:flex-row gap-4 pb-2 pt-1">
    <div class="flex flex-col flex-1">
      <label for="">Due Date</label>
      <z-date-picker
        [value]="selectedDate()"
        placeholder="Pick a date"
        (dateChange)="onDateChange($event)"
        zFormat="dd-MM-yyyy"
        formControlName="dueDate"
        zSize="default"
        zType="date"
      />

      @if (createProject.get('dueDate')?.touched && createProject.get('dueDate')?.invalid) {
        @if (createProject.get('dueDate')?.errors?.['required']) {
          <span class="text-destructive"> please select the date</span>
        }
      }
    </div>

    <div class="flex flex-col flex-1">
      <label for="">Priority</label>
      <z-select id="priority" formControlName="priority" placeholder="Select priority">
        @for (p of priority; track p.value) {
          <z-select-item [zValue]="p.value">{{ p.label }}</z-select-item>
        }
      </z-select>

      @if (createProject.get('priority')?.touched && createProject.get('priority')?.invalid) {
        @if (createProject.get('priority')?.errors?.['required']) {
          <span class="text-destructive"> please select the priority</span>
        }
      }
    </div>
  </div>

  <div class="flex flex-col pb-2 pt-1">
    <label for="">Status</label>
    <z-select id="status" formControlName="status" placeholder="Select status">
      @for (s of status; track s.value) {
        <z-select-item [zValue]="s.value">{{ s.label }}</z-select-item>
      }
    </z-select>
    
    @if (createProject.get('status')?.touched && createProject.get('status')?.invalid) {
      @if (createProject.get('status')?.errors?.['required']) {
        <span class="text-destructive"> please select the status</span>
      }
    }
  </div>

  <button z-button type="submit" class="mt-3">Create</button>
</form>
